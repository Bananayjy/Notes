## 05、Java代码执行流程

### 5.1 简单概述

Java程序首先编译为字节码文件，然后字节码文件在对应的操作系统上的JVM中进行编译解析运行。

![image-20240601213230403](05%E3%80%81Java%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B.assets/image-20240601213230403.png)

### 5.2 展开说明

扩展：只要字节码符合JVM的编译规范，JVM虚拟机就可以编译执行，并且我们可以自己去设计一个语言（包括语言源码和编译成字节码的方式）

整个java的执行流程如下图所示



![image-20240601213452968](05%E3%80%81Java%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B.assets/image-20240601213452968.png)

注意：CPU/计算机只能识别机器指令，我们首先要把高级语言转换成汇编预约，再将汇编预约转换成机器指令，而这个过程就是JVM中执行引擎来完成的。（世面上主流的虚拟机都采用了解释执行、及时编译并行的方式）

- 解释器：解释字节码是实时将字节码文件转化为机器指令
- JIT编译器：会将热点代码转化为机器指令，并缓存起来，放在方法区中，下次可以直接调用。其主要用于提升jvm的性能。

其中涉及到两次编译，第一次是将java源码编译为字节码文件，第二次编译试讲字节码文件编译为机器指令。