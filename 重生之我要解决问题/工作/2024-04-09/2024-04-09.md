# 2024-04-09

## 1、模版引擎

- System.getProperty("user.dir")

获取当前工作目录的路径（如：D:\codesaver\hs-ward-platform）



使用FreeMarker实现根据实体类动态创建相应的代码。



FreeMarker 是一个用于生成动态内容的模板引擎。它使用基于模板和数据模型的方式，生成文本输出。FreeMarker 最初是为 Java 编程语言开发的，但也有针对其他编程语言的版本。

使用 FreeMarker，你可以将静态模板与动态数据模型结合起来，生成动态内容。通常情况下，你会创建一个包含变量、条件语句、循环等的模板，然后使用 FreeMarker 引擎将模板与数据模型合并，生成最终的输出文本。

下面是一个简单的 FreeMarker 示例：

```
javaCopy Codeimport freemarker.template.Configuration;
import freemarker.template.Template;
import freemarker.template.TemplateException;

import java.io.File;
import java.io.IOException;
import java.io.StringWriter;
import java.util.HashMap;
import java.util.Map;

public class FreeMarkerExample {
    public static void main(String[] args) throws IOException, TemplateException {
        // 配置 FreeMarker
        Configuration cfg = new Configuration(Configuration.VERSION_2_3_30);
        cfg.setDirectoryForTemplateLoading(new File("/path/to/templates"));

        // 加载模板
        Template template = cfg.getTemplate("myTemplate.ftl");

        // 创建数据模型
        Map<String, Object> data = new HashMap<>();
        data.put("name", "John Doe");
        data.put("age", 30);

        // 合并模板和数据模型
        StringWriter out = new StringWriter();
        template.process(data, out);

        // 输出生成的内容
        System.out.println(out.toString());
    }
}
```

在这个示例中，我们首先配置了 FreeMarker 引擎，然后加载了一个名为 `myTemplate.ftl` 的模板文件。接下来，我们创建了一个包含名称和年龄的数据模型，并将模板和数据模型合并。最终，我们将生成的内容输出到控制台上。

FreeMarker 支持丰富的模板语法，包括变量、条件语句、循环等，可以根据需要生成各种不同类型的输出。





FreeMarker 的原理基本上可以分为以下几个步骤：

1. **解析模板文件**：FreeMarker 会读取模板文件，这通常是一个文本文件，其中包含模板的内容以及 FreeMarker 的特定语法标记。这些标记可以包括变量引用、条件语句、循环等。
2. **创建数据模型**：在模板与数据模型合并之前，需要准备好数据模型。数据模型通常是一个键值对的集合，其中键表示模板中的变量名，而值则是实际的数据。这可以是 Java 对象、Map、List 等。
3. **模板与数据合并**：一旦模板文件被解析并且数据模型准备就绪，FreeMarker 就会将模板与数据模型进行合并。这意味着模板中的变量会被替换为相应的数据，条件语句会根据数据的值进行求值，循环会根据数据的结构进行迭代等等。
4. **生成输出**：合并完成后，FreeMarker 将生成的内容作为输出。这通常是一个字符串，可以直接输出到浏览器、写入文件或传递给其他系统组件。

总的来说，FreeMarker 的工作原理就是将模板与数据合并，生成最终的输出内容。通过灵活的模板语法和强大的数据处理能力，FreeMarker 可以用于生成各种类型的动态内容，例如 HTML 页面、电子邮件模板、配置文件等。



详细说明：

1、<#assign entityCodeBig = entityCode?cap_first> package ${comPathDot}.controller${childSufDot};

`<#assign entityCodeBig = entityCode?cap_first>` 这行代码在 FreeMarker 中的作用是定义一个新的变量 `entityCodeBig`，并将其赋值为 `entityCode` 变量的首字母大写形式。

让我进一步解释一下：

- `<#assign>`：这是 FreeMarker 中用于定义变量的指令。它类似于编程语言中的赋值语句。
- `entityCodeBig`：这是要定义的新变量的名称。
- `entityCode`：这是一个现有的变量，它的值将被使用。
- `?cap_first`：这是 FreeMarker 的字符串转换函数，它将字符串的第一个字母转换为大写形式。

因此，这行代码的作用是将 `entityCode` 变量的首字母大写形式赋值给 `entityCodeBig` 变量。例如，如果 `entityCode` 的值是 `"example"`，那么 `entityCodeBig` 的值将是 `"Example"`。