# 2024-04-24

## 一、关于Linux系统中的systemctl命令

### 1.1、systemctl命令

`systemctl` 是 `systemd` 的主命令，用于控制系统和服务管理器。`systemd` 是 Linux 系统和服务管理器，它提供了启动、监视和管理系统服务的功能。通过 `systemctl`，用户可以查询系统服务的状态，启动、停止、重新启动、重载和启用/禁用服务。

以下是一些常用的 `systemctl` 命令及其用途：

- `systemctl status [service-name]`：查看指定服务的状态。
- `systemctl start [service-name]`：启动指定服务。
- `systemctl stop [service-name]`：停止指定服务。
- `systemctl restart [service-name]`：重新启动指定服务。
- `systemctl reload [service-name]`：重新加载指定服务的配置（如果服务支持）。
- `systemctl enable [service-name]`：在系统启动时启用指定服务。
- `systemctl disable [service-name]`：在系统启动时禁用指定服务。
- `systemctl is-enabled [service-name]`：查询指定服务是否设置为开机启动。
- `systemctl list-units --type=service`：列出所有运行中的服务。
- `systemctl daemon-reload`：重新加载 `systemd` 的配置（通常在修改了服务的配置文件后使用）。

此外，`systemctl` 还提供了许多其他功能和选项，可以用来查询和管理系统的各个方面，如挂载点、套接字、定时器、路径等。

要注意的是，为了使用 `systemctl` 命令，用户通常需要具有适当的权限，通常这意味着需要以 root 用户身份运行命令，或者使用 `sudo` 前缀来获取必要的权限。

### 1.2、 systemctl daemon-reload命令

`systemctl daemon-reload` 命令在 Linux 系统中用于重新加载 `systemd` 守护进程的配置文件。当管理员对 `systemd` 的配置文件进行了修改后，这个命令允许系统重新加载这些配置，使修改生效，而无需重启整个系统或守护进程。

这个命令的工作原理是检测系统中所有服务的配置文件是否发生了变化。当执行 `systemctl daemon-reload` 时，`systemd` 会重新读取 `/etc/systemd/system` 目录中的所有 `.service`、`.socket`、`.device`、`.mount`、`.automount`、`.swap`、`.target`、`.path` 和 `.timer` 等后缀的配置文件，并更新 `systemd` 守护进程的配置。这样，任何对服务配置文件的修改都可以立即生效，避免了重启系统或服务的需要，使得配置更改更加方便快捷。

这个命令主要用于在添加、修改或删除系统服务的配置文件后，通知 `systemd` 重新加载这些配置文件。它确保了系统能够按照新的配置正常运行，避免了由于配置更改没有及时生效而可能引发的问题。

需要注意的是，执行 `systemctl daemon-reload` 命令通常需要管理员权限，因此通常需要使用 `sudo` 命令来获取相应的权限。

综上所述，`systemctl daemon-reload` 命令并不直接重启守护进程，而是重新加载其配置文件，使得配置更改能够立即生效。这避免了不必要的系统或服务重启，提高了系统管理的效率和灵活性。

（Docker中的daemon.json用于配置Dokcer守护进程的json格式配置文件，而且，无论Docker在哪个平台以何种方式启动，都会默认到这个配置文件的路径（/etc/docker/daemon.json）下读取配置，这使得用户可以在不同的系统下统一管理Docker daemon的配置，在修改了daemon.json文件后，为了使配置生效，通常需要重新加载或重启Docker守护进程）



