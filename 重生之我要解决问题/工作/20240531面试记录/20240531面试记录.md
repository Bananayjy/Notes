## 20240531面试记录

### 一、 项目中为什么要使用Docker？

相关文章：

https://blog.csdn.net/weixin_44232093

https://blog.csdn.net/qq_42696432/article/details/136835968

#### 1.1 Java中的JVM不是也支持跨平台吗，为什么还需要使用Dokcer容器管理

JVM的跨平台实现是通过将java源代码编译成一种中间格式字节码格式（而不是编译成特定平台的机器码），然后在JVM中进行运行（JVM在不同平台中需要使用不同的JVM）。 JVM在运行时将字节码转换为特定平台的机器码。这个过程称为即时编译（JIT编译），它根据当前运行的平台和环境动态地生成本地机器码。这使得Java程序可以在不同的平台上运行，因为JVM会根据运行环境生成适合该环境的机器码。Java开发人员可以在任何支持JVM的平台上进行开发和测试，无需关心底层操作系统和硬件的差异，这简化了开发过程并提高了开发效率。并且 JVM提供了自动内存管理机制，包括垃圾回收和内存分配，使得Java程序在不同平台上的内存管理更加方便和可靠。

而docker的作用除了可移植性外，还具有很多的优点。



#### 1.2 关于docker容器的优点

- 环境一致性
- 简化部署流程
- 版本管理
- 资源利用高效
- 微服务架构适应性
- 跨平台兼容性



### 二、公司项目部署过程

- 本地项目开发完成（连接的数据库、redis都是测试环境，也可以连接本地），提交代码到gitee仓库
- 测试环境jenkins构建项目（jenkins预先完成了配置，从gitee代码库拉下代码，并通过maven对项目进行构建，并将构建完成的jar包推送到测试环境具体目录，预先存放Dockfile/用于构建镜像和dokcer-compose.yml/用于配置项目容器堆栈信息，通过jenkins中配置的docker命令启动容器，并将构建的镜像包推送到当前目录）
- 将tar包或jar包发送到线上。
  - 线上如果是jar包起的，直接使用jar包启动即可。
  - 线上如果是tar包起的，直接使用可视化的por-- 进行镜像的导入，并配置堆栈启动容器。

### 三、Mysql的事务的特性

- 原子性（Atomicity）：事务是原子的，它要么全部提交成功，要么全部失败回滚，不会出现部分提交或部分回滚的情况。这意味着在一个事务中的所有操作要么全部完成，要么全部撤销，不会出现中间状态。

- 一致性（Consistency）： 事务执行前后，数据库从一个一致性状态（数据库中的所有数据都是已完成的事务提交后的结果）转移到另一个一致性状态。在事务执行过程中，数据库的完整性约束不会被破坏。

  - 由于事务的原子特性，当一个事务执行结束时，其中包含的SQL要么全部执行、要么全部不执行，这就保证了上文所说的：数据库中所有数据都是已执行完成的事务提交后的结果。换句话说，**事务的原子性成就了事务的一致性**。

  - 数据约束完整性：事务的执行不会违反数据库中定义的任何约束，如主键约束、唯一约束、外键约束等。例如，如果一个表设置了唯一约束，那么事务在插入数据时不会违反这个约束，确保数据的唯一性。
  - 业务逻辑一致性：事务执行过程中，数据库中的数据应该保持业务逻辑上的一致性。这意味着事务所做的修改必须符合业务规则和要求。例如，在银行转账业务中，如果一个事务从一个账户扣款并将金额转入另一个账户，那么转账金额必须准确，且不会出现金额丢失或多余的情况。
  - 数据完整性：事务执行过程中，数据库中的数据应该保持逻辑上的完整性。这意味着数据的状态应该处于一个合法、一致的状态。例如，在一个订单管理系统中，订单的支付状态和商品库存数量应该始终保持一致，不会出现支付了但库存没有减少的情况。

- 隔离性（Isolation）： 多个事务同时并发执行时，每个事务都感觉不到其他事务的存在，每个事务在执行时都像是系统中唯一的事务。这意味着事务之间的操作互相隔离，不会相互干扰。MySQL 使用**不同的隔离级别**（如读未提交、读已提交、可重复读、串行化）来控制事务的隔离程度。
- 持久性（Durability）： 一旦事务提交成功，其所做的修改将永久保存在数据库中，并且对后续的事务和系统故障是可见的。即使系统发生故障，数据库也能够通过日志等机制来保证事务的持久性。



